<div class="npc-form">
  <div class="row">
    <div class="col-12 input-group">
      <label class="input-group-text">Nom</label>
      <input [(ngModel)]="npc.name" type="text" class="form-control" placeholder="Nom" />
    </div>

    <div class="col-12 input-group">
      <label class="input-group-text">Point faible</label>
      <input [(ngModel)]="npc.weakness" type="text" class="form-control" placeholder="Point faible" />
    </div>

    <div class="col-4">
      <div class="input-group" *ngFor="let aspect of npc.aspects">
        <label class="input-group-text">{{ aspect.name }}</label>
        <input [(ngModel)]="aspect.score" type="number" class="form-control" />
          <input [(ngModel)]="aspect.exceptional" type="number" class="form-control" />
          <div class="input-group-text">
            <input [(ngModel)]="aspect.major" type="checkbox" class="form-check-input mt-0" />
          </div>
      </div>
    </div>

    <div class="col-4" *ngFor="let props of properties">
      <div class="input-group" *ngFor="let prop of props">
        <label class="input-group-text">{{ prop.label }}</label>
        <input [(ngModel)]="$any(npc)[prop.property]" type="number" class="form-control" />
      </div>
    </div>

    <div class="col-6">
      <button class="btn btn-primary" (click)="npc.addCapacity()">+ capacit√©</button>

      <div class="npc-form-capacity" *ngFor="let capacity of npc.capacities">
        <div class="input-group">
          <label class="input-group-text">Nom</label>
          <input [(ngModel)]="capacity.name" type="text" class="form-control" />
          <button class="btn btn-danger" (click)="npc.removeCapacity(capacity)">X</button>
        </div>

        <textarea class="form-control" [(ngModel)]="capacity.description"></textarea>
      </div>
    </div>

    <div class="col-6">
      <button class="btn btn-primary" (click)="npc.addWeapon()">+ arme</button>

      <div class="npc-form-weapon" *ngFor="let weapon of npc.weapons">
        <div class="input-group">
          <label class="input-group-text">Nom</label>
          <input [(ngModel)]="weapon.name" type="text" class="form-control" />
          <button class="btn btn-danger" (click)="npc.removeWeapon(weapon)">X</button>
        </div>

        <div class="input-group">
          <input [(ngModel)]="weapon.dices" type="number" class="form-control" />
          <span class="input-group-text">d6 + </span>
          <input [(ngModel)]="weapon.raw" type="number" class="form-control" />
          <div class="input-group-text">
            <input [(ngModel)]="weapon.contact" type="checkbox" class="form-check-input mt-0" />
          </div>
          <select [(ngModel)]="weapon.range" class="form-control">
            <option value="contact">Contact</option>
            <option value="courte">Courte</option>
            <option value="moyenne">Moyenne</option>
            <option value="longue">Longue</option>
            <option value="lointaine">Lointaine</option>
          </select>
        </div>

        <button class="btn btn-primary" (click)="weapon.addEffect()">+ effet</button>

        <div class="row">
          <div class="col-6" *ngFor="let effect of weapon.effects">
            <div class="input-group">
              <input [(ngModel)]="effect.name" class="form-control" type="text" />
              <button class="btn btn-danger" (click)="weapon.removeEffect(effect)">X</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>